<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Registration | MyKad-LifeLink</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="landing-container" style="min-height: 100vh; overflow-y: auto;">
        <header>
            <a href="../index.html" id="back-link">← Back</a>
            <h1>Patient Portal</h1>
            <p>Update your emergency medical profile.</p>
        </header>

        <form id="patientForm" style="display: flex; flex-direction: column; gap: 15px; text-align: left;">
            <label>Full Name</label>
            <input id="full_name" type="text" placeholder="Enter name as per MyKad" required style="padding: 10px; border-radius: 5px; border: 1px solid #ddd;">

            <label>MyKad Number (NRIC)</label>
            <input id="nric_number" type="text" placeholder="XXXXXX-XX-XXXX" required style="padding: 10px; border-radius: 5px; border: 1px solid #ddd;">

            <label>Date of Birth</label>
            <input id="birth_date" type="date" required style="padding: 10px; border-radius: 5px; border: 1px solid #ddd;">

            <label>Sex</label>
            <select id="sex" required style="padding: 10px; border-radius: 5px;">
                <option value="">Select...</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>

            <label>Blood Type</label>
            <select id="blood_type" required style="padding: 10px; border-radius: 5px;">
                <option value="">Select...</option>
                <option value="A+">A+</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B-">B-</option>
                <option value="O+">O+</option>
                <option value="O-">O-</option>
                <option value="AB+">AB+</option>
                <option value="AB-">AB-</option>
            </select>

            <label>Known Allergies (comma-separated)</label>
            <textarea id="allergies" placeholder="e.g. Penicillin, Peanuts, Shellfish" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd;"></textarea>

            <label>Chronic Conditions (comma-separated)</label>
            <textarea id="chronic_conditions" placeholder="e.g. Diabetes, Hypertension, Asthma" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd;"></textarea>

            <label>Risk Factors (comma-separated)</label>
            <textarea id="risk_factors" placeholder="e.g. Smoking, Family history of heart disease" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd;"></textarea>

            <div style="display: flex; gap: 10px; align-items: flex-start; background: #f9f9f9; padding: 10px; border-radius: 5px;">
                <input type="checkbox" id="consent" required>
                <label for="consent" style="font-size: 0.85rem;">I agree to allow medical staff to access this data during emergencies using my MyKad.</label>
            </div>

            <button type="submit" class="role-card patient" style="padding: 15px; background: var(--primary-blue); color: white;">SAVE PROFILE</button>
            <button id="dark-mode-toggle" aria-label="Toggle Dark Mode">☀️</button>

        </form>
    </div>
    <script src="../js/api.js"></script>
    <script>
        // // Simple client-side guard: redirect to admin login if not authenticated
        // (function(){
        //     const token = localStorage.getItem('access_token');
        //     const role = localStorage.getItem('role');   
        //     if (!token || role !== 'clinic_admin') {
        //         window.location.href = '../loginPages/adminLogin.html';
        //     }
        // })();
    </script>
    <script src="../js/ui.js"></script>
</body>
</html>